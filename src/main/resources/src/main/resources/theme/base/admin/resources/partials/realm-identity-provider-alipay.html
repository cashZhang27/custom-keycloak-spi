<div class="col-sm-9 col-md-10 col-sm-push-3 col-md-push-2">
  <ol class="breadcrumb">
    <li><a href="#/realms/{{realm.realm}}/identity-provider-settings">{{:: 'identity-providers' |
      translate}}</a></li>
    <li data-ng-show="!newIdentityProvider && identityProvider.displayName">
      {{identityProvider.displayName}}
    </li>
    <li data-ng-show="!newIdentityProvider && !identityProvider.displayName">
      {{identityProvider.alias}}
    </li>
    <li data-ng-show="newIdentityProvider">{{:: 'add-identity-provider' | translate}}</li>
  </ol>

  <kc-tabs-identity-provider></kc-tabs-identity-provider>

  <form class="form-horizontal" kc-read-only="!access.manageIdentityProviders" name="realmForm"
        novalidate>
    <fieldset>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="redirectUri">{{:: 'redirect-uri' |
          translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="redirectUri" kc-select-action="click"
                 readonly type="text"
                 value="{{callbackUrl}}{{identityProvider.alias}}/endpoint">
        </div>
        <kc-tooltip>{{:: 'redirect-uri.tooltip' | translate}}</kc-tooltip>
      </div>
    </fieldset>
    <fieldset>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="identifier"><span class="required">*</span> {{::
          'alias' | translate}}</label>
        <div class="col-md-6">
          <input class="form-control" data-ng-readonly="!newIdentityProvider" id="identifier"
                 kc-no-reserved-chars
                 ng-model="identityProvider.alias" required type="text">
        </div>
        <kc-tooltip>{{:: 'identity-provider.alias.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="displayName"> {{:: 'display-name' |
          translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="displayName" ng-model="identityProvider.displayName"
                 type="text">
        </div>
        <kc-tooltip>{{:: 'identity-provider.display-name.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="enabled">{{:: 'enabled' | translate}}</label>
        <div class="col-md-6">
          <input id="enabled" ng-model="identityProvider.enabled"
                 off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}" onoffswitch/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.enabled.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="storeToken">{{:: 'store-tokens' |
          translate}}</label>
        <div class="col-md-6">
          <input id="storeToken" ng-model="identityProvider.storeToken"
                 off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}" onoffswitch/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.store-tokens.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="storedTokensReadable">{{::
          'stored-tokens-readable' | translate}}</label>
        <div class="col-md-6">
          <input id="storedTokensReadable" ng-model="identityProvider.addReadTokenRoleOnCreate"
                 off-text="{{:: 'offText' | translate}}" on-text="{{:: 'onText' | translate}}"
                 onoffswitch/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.stored-tokens-readable.tooltip' | translate}}
        </kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="trustEmail">{{:: 'trust-email' |
          translate}}</label>
        <div class="col-md-6">
          <input id="trustEmail" name="identityProvider.trustEmail"
                 ng-model="identityProvider.trustEmail" off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}"
                 onoffswitch/>
        </div>
        <kc-tooltip>{{:: 'trust-email.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="linkOnly">{{:: 'link-only' | translate}}</label>
        <div class="col-md-6">
          <input id="linkOnly" name="identityProvider.trustEmail"
                 ng-model="identityProvider.linkOnly" off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}"
                 onoffswitch/>
        </div>
        <kc-tooltip>{{:: 'link-only.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="hideOnLoginPage">{{:: 'hide-on-login-page' |
          translate}}</label>
        <div class="col-md-6">
          <input id="hideOnLoginPage"
                 name="identityProvider.config.hideOnLoginPage"
                 ng-model="identityProvider.config.hideOnLoginPage"
                 off-text="{{:: 'offText' | translate}}" on-text="{{:: 'onText' | translate}}"
                 onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'hide-on-login-page.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="guiOrder">{{:: 'gui-order' | translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="guiOrder" ng-model="identityProvider.config.guiOrder"
                 type="text">
        </div>
        <kc-tooltip>{{:: 'gui-order.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="firstBrokerLoginFlowAlias">{{::
          'first-broker-login-flow' | translate}}</label>
        <div class="col-md-6">
          <div>
            <select class="form-control" id="firstBrokerLoginFlowAlias"
                    ng-model="identityProvider.firstBrokerLoginFlowAlias"
                    ng-options="flow.alias as flow.alias for flow in authFlows"
                    required>
            </select>
          </div>
        </div>
        <kc-tooltip>{{:: 'first-broker-login-flow.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="postBrokerLoginFlowAlias">{{::
          'post-broker-login-flow' | translate}}</label>
        <div class="col-md-6">
          <div>
            <select class="form-control" id="postBrokerLoginFlowAlias"
                    ng-model="identityProvider.postBrokerLoginFlowAlias"
                    ng-options="flow.alias as flow.alias for flow in postBrokerAuthFlows">
            </select>
          </div>
        </div>
        <kc-tooltip>{{:: 'post-broker-login-flow.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="syncMode">{{:: 'sync-mode' | translate}}</label>
        <div class="col-md-6">
          <div>
            <select class="form-control" id="syncMode"
                    ng-model="identityProvider.config.syncMode"
                    required>
              <option id="syncMode_import" name="syncMode" value="IMPORT">{{:: 'sync-mode.import' |
                translate}}
              </option>
              <option id="syncMode_legacy" name="syncMode" value="LEGACY">{{:: 'sync-mode.legacy' |
                translate}}
              </option>
              <option id="syncMode_force" name="syncMode" value="FORCE">{{:: 'sync-mode.force' |
                translate}}
              </option>
            </select>
          </div>
        </div>
        <kc-tooltip>{{:: 'sync-mode.tooltip' | translate}}</kc-tooltip>
      </div>
    </fieldset>
    <fieldset>
      <legend uncollapsed><span class="text">{{:: 'openid-connect-config' | translate}}</span>
        <kc-tooltip>{{:: 'openid-connect-config.tooltip' | translate}}</kc-tooltip>
      </legend>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="authorizationUrl"><span class="required">*</span>
          {{:: 'authorization-url' | translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="authorizationUrl"
                 ng-model="identityProvider.config.authorizationUrl"
                 required type="text">
        </div>
        <kc-tooltip>{{:: 'authorization-url.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label" for="loginHint">{{:: 'loginHint' | translate}}</label>
        <div class="col-sm-4">
          <input id="loginHint" ng-model="identityProvider.config.loginHint"
                 off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}" onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'loginHint.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label" for="uiLocales">{{:: 'uiLocales' | translate}}</label>
        <div class="col-sm-4">
          <input id="uiLocales" ng-model="identityProvider.config.uiLocales"
                 off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}" onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'uiLocales.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="tokenUrl"><span class="required">*</span> {{::
          'token-url' | translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="tokenUrl" ng-model="identityProvider.config.tokenUrl"
                 required type="text">
        </div>
        <kc-tooltip>{{:: 'token-url.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="userInfoUrl">{{:: 'logout-url' |
          translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="logoutUrl" ng-model="identityProvider.config.logoutUrl"
                 type="text">
        </div>
        <kc-tooltip>{{:: 'identity-provider.logout-url.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label" for="backchannelSupported">{{:: 'backchannel-logout' |
          translate}}</label>
        <div class="col-sm-4">
          <input id="backchannelSupported" ng-model="identityProvider.config.backchannelSupported"
                 off-text="{{:: 'offText' | translate}}" on-text="{{:: 'onText' | translate}}"
                 onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'backchannel-logout.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="disableUserInfo">{{:: 'disableUserInfo' |
          translate}}</label>
        <div class="col-md-6">
          <input id="disableUserInfo" ng-model="identityProvider.config.disableUserInfo"
                 off-text="{{:: 'offText' | translate}}" on-text="{{:: 'onText' | translate}}"
                 onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.disableUserInfo.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="userInfoUrl">{{:: 'user-info-url' |
          translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="userInfoUrl"
                 ng-model="identityProvider.config.userInfoUrl"
                 type="text">
        </div>
        <kc-tooltip>{{:: 'user-info-url.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="aliPayApplicationType">
          <span class="required">*</span>
          应用类型
        </label>
        <div class="col-md-6">
          <div>
            <select class="form-control" id="aliPayApplicationType"
                    ng-model="identityProvider.config.aliPayApplicationType"
                    required>
              <option id="aliPayApplicationType_applets" name="aliPayApplicationType" selected
                      value="applets">
                applets
              </option>
              <option id="aliPayApplicationType_web" name="aliPayApplicationType" value="web">
                Web
              </option>
              <option id="aliPayApplicationType_three_part" name="aliPayApplicationType"
                      value="three_part">
                Three Part
              </option>
            </select>
          </div>
        </div>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="clientId"><span class="required">*</span> {{::
          'client-id' | translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="clientId" ng-model="identityProvider.config.clientId"
                 required type="text">
        </div>
        <kc-tooltip>{{:: 'identity-provider.client-id.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="appPrivateKey">
          <span class="required">*</span>
          应用私钥
        </label>
        <div class="col-md-6">
          <input class="form-control" id="appPrivateKey" kc-password
                 ng-model="identityProvider.config.appPrivateKey" required>
        </div>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="appCertContent">
          <span class="required">*</span>
          应用公钥证书内容
        </label>
        <div class="col-md-6">
          <input class="form-control" id="appCertContent" kc-password
                 ng-model="identityProvider.config.appCertContent" required>
        </div>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="appCertContent">
          <span class="required">*</span>
          支付宝公钥证书路径
        </label>
        <div class="col-md-6">
          <input class="form-control" id="appCertContent" kc-password
                 ng-model="identityProvider.config.appCertContent" required>
        </div>
      </div>
      <div class="form-group clearfix">
        <label class="col-md-2 control-label" for="defaultScope">{{:: 'default-scopes' |
          translate}} </label>
        <div class="col-md-6">
          <input class="form-control" id="defaultScope"
                 ng-model="identityProvider.config.defaultScope"
                 type="text">
        </div>
        <kc-tooltip>{{:: 'identity-provider.default-scopes.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="prompt">{{:: 'prompt' | translate}}</label>
        <div class="col-md-6">
          <div>
            <select class="form-control" id="prompt" ng-model="identityProvider.config.prompt">
              <option value="">{{:: 'unspecified.option' | translate}}</option>
              <option value="none">{{:: 'none.option' | translate}}</option>
              <option value="consent">{{:: 'consent.option' | translate}}</option>
              <option value="login">{{:: 'login.option' | translate}}</option>
              <option value="select_account">{{:: 'select-account.option' | translate}}</option>
            </select>
          </div>
        </div>
        <kc-tooltip>{{:: 'prompt.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="acceptsPromptNoneForwardFromClient">{{::
          'accepts-prompt-none-forward-from-client' | translate}}</label>
        <div class="col-md-6">
          <input id="acceptsPromptNoneForwardFromClient"
                 ng-model="identityProvider.config.acceptsPromptNoneForwardFromClient"
                 off-text="{{:: 'offText' | translate}}"
                 on-text="{{:: 'onText' | translate}}" onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'accepts-prompt-none-forward-from-client.tooltip' | translate}}
        </kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="validateSignature">{{:: 'validate-signatures' |
          translate}}</label>
        <div class="col-md-6">
          <input id="validateSignature" ng-model="identityProvider.config.validateSignature"
                 off-text="{{:: 'offText' | translate}}" on-text="{{:: 'onText' | translate}}"
                 onoffswitchvalue/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.validate-signatures.tooltip' | translate}}</kc-tooltip>
      </div>

      <div data-ng-show="identityProvider.config.validateSignature == 'true'">

        <div class="form-group">
          <label class="col-md-2 control-label" for="useJwksUrl">{{:: 'use-jwks-url' |
            translate}}</label>
          <div class="col-md-6">
            <input id="useJwksUrl" ng-model="identityProvider.config.useJwksUrl"
                   off-text="{{:: 'offText' | translate}}"
                   on-text="{{:: 'onText' | translate}}" onoffswitchvalue/>
          </div>
          <kc-tooltip>{{:: 'identity-provider.use-jwks-url.tooltip' | translate}}</kc-tooltip>
        </div>

        <div class="form-group clearfix"
             data-ng-show="identityProvider.config.useJwksUrl == 'true'">
          <label class="col-md-2 control-label" for="jwksUrl">{{:: 'jwks-url' | translate}} </label>
          <div class="col-md-6">
            <input class="form-control" id="jwksUrl" ng-model="identityProvider.config.jwksUrl"
                   type="text">
          </div>
          <kc-tooltip>{{:: 'identity-provider.jwks-url.tooltip' | translate}}</kc-tooltip>
        </div>

        <div class="form-group clearfix"
             data-ng-hide="identityProvider.config.useJwksUrl == 'true'">
          <label class="col-md-2 control-label" for="publicKeySignatureVerifier">{{::
            'validating-public-key' | translate}}</label>
          <div class="col-md-6">
            <textarea class="form-control" id="publicKeySignatureVerifier"
                      ng-model="identityProvider.config.publicKeySignatureVerifier"/>
          </div>
          <kc-tooltip>{{:: 'identity-provider.validating-public-key.tooltip' | translate}}
          </kc-tooltip>
        </div>

        <div class="form-group clearfix"
             data-ng-hide="identityProvider.config.useJwksUrl == 'true'">
          <label class="col-md-2 control-label" for="publicKeySignatureVerifierKeyId">{{::
            'validating-public-key-id' | translate}}</label>
          <div class="col-md-6">
            <input class="form-control" id="publicKeySignatureVerifierKeyId"
                   ng-model="identityProvider.config.publicKeySignatureVerifierKeyId"/>
          </div>
          <kc-tooltip>{{:: 'identity-provider.validating-public-key-id.tooltip' | translate}}
          </kc-tooltip>
        </div>

      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="allowedClockSkew">{{:: 'allowed-clock-skew' |
          translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="allowedClockSkew"
                 ng-model="identityProvider.config.allowedClockSkew" type="text"/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.allowed-clock-skew.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="forwardParameters">{{::
          'forwarded-query-parameters' | translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="forwardParameters"
                 ng-model="identityProvider.config.forwardParameters"
                 type="text"/>
        </div>
        <kc-tooltip>{{:: 'identity-provider.forwarded-query-parameters.tooltip' | translate}}
        </kc-tooltip>
      </div>
    </fieldset>
    <fieldset data-ng-show="newIdentityProvider">
      <legend uncollapsed><span class="text">{{:: 'import-external-idp-config' | translate}}</span>
        <kc-tooltip>{{:: 'import-external-idp-config.tooltip' | translate}}</kc-tooltip>
      </legend>
      <div class="form-group" data-ng-show="newIdentityProvider">
        <label class="col-md-2 control-label" for="fromUrl">{{:: 'import-from-url' |
          translate}}</label>
        <div class="col-md-6">
          <input class="form-control" id="fromUrl" ng-model="fromUrl.data" type="text">
        </div>
        <kc-tooltip>{{:: 'identity-provider.import-from-url.tooltip' | translate}}</kc-tooltip>
      </div>
      <div class="form-group">
        <label class="col-md-2 control-label" for="importFrom"></label>
        <div class="col-md-6">
          <button class="btn btn-primary" data-ng-click="importFrom()" data-ng-show="importUrl"
                  id="importFrom" type="button">{{:: 'import' | translate}}
          </button>
        </div>
      </div>
      <div class="form-group" data-ng-show="newIdentityProvider">
        <label class="col-md-2 control-label">{{:: 'import-from-file' | translate}}</label>
        <kc-tooltip>{{:: 'identity-provider.import-from-file.tooltip' | translate}}</kc-tooltip>
        <div class="col-md-6">
          <div class="controls kc-button-input-file" data-ng-show="!files || files.length == 0">
            <label class="btn btn-default" for="import-file">{{:: 'select-file' | translate}} <i
                class="pficon pficon-import"></i></label>
            <input class="hidden" id="import-file" ng-file-select="onFileSelect($files)"
                   type="file">
          </div>
          <span class="kc-uploaded-file" data-ng-show="files.length > 0">
                    {{files[0].name}}
                </span>
        </div>
        <div class="form-group">
          <label class="col-md-2 control-label" for="importFile"></label>
          <div class="col-md-6" data-ng-show="importFile">
            <button class="btn btn-primary" data-ng-click="uploadFile()" data-ng-show="importFile"
                    id="importFile" type="button">{{:: 'import' | translate}}
            </button>
          </div>
        </div>
      </div>
    </fieldset>

    <div class="form-group">
      <div class="col-md-10 col-md-offset-2">
        <button data-ng-disabled="!changed" kc-save>{{:: 'save' | translate}}</button>
        <button data-ng-click="cancel()" data-ng-disabled="!changed" kc-cancel>{{:: 'cancel' |
          translate}}
        </button>
      </div>
    </div>
  </form>
</div>


<kc-menu></kc-menu>
